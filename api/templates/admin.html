<!-- templates/admin.html -->
{% extends "base.html" %}

{% block title %}Administration - Gestionnaire de Liens{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">
            <i class="fas fa-cog text-primary"></i> 
            Administration des Liens
        </h1>
        
        <!-- Formulaire d'ajout -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-plus"></i> Ajouter un nouveau lien</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('add_link') }}">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="title" class="form-label">Titre *</label>
                            <input type="text" class="form-control" id="title" name="title" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="url" class="form-label">URL *</label>
                            <input type="url" class="form-control" id="url" name="url" required 
                                   placeholder="https://example.com">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="category" class="form-label">Catégorie</label>
                            <input type="text" class="form-control" id="category" name="category" 
                                   placeholder="Ex: Outils, Documentation, Personnel...">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="2" 
                                      placeholder="Description courte du lien..."></textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Ajouter le lien
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Liste des liens existants -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-list"></i> 
                    Liens existants ({{ links|length }})
                </h5>
            </div>
            <div class="card-body">
                {% if not links %}
                    <p class="text-muted">Aucun lien enregistré pour le moment.</p>
                {% else %}
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Titre</th>
                                    <th>URL</th>
                                    <th>Catégorie</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for link in links %}
                                    <tr>
                                        <td>
                                            <strong>{{ link.title }}</strong>
                                            {% if link.description %}
                                                <br><small class="text-muted">{{ link.description }}</small>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{{ link.url }}" target="_blank" class="text-decoration-none">
                                                {{ link.url[:50] }}{% if link.url|length > 50 %}...{% endif %}
                                                <i class="fas fa-external-link-alt fa-sm"></i>
                                            </a>
                                        </td>
                                        <td>
                                            {% if link.category %}
                                                <span class="badge bg-secondary">{{ link.category }}</span>
                                            {% else %}
                                                <span class="text-muted">-</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <small>{{ link.created_at[:10] if link.created_at else 'N/A' }}</small>
                                        </td>
                                        <td>
                                            <a href="{{ url_for('edit_link', link_id=link.id) }}" 
                                               class="btn btn-sm btn-outline-primary me-1">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a href="{{ url_for('delete_link', link_id=link.id) }}" 
                                               class="btn btn-sm btn-outline-danger"
                                               onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce lien ?')">
                                                <i class="fas fa-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

